<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Clarytiq ‚Äî App</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- FONTS -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap" rel="stylesheet" />

<!-- CLERK AUTH (KEEPING BOTH AS REQUESTED) -->
<script async crossorigin="anonymous"
data-clerk-publishable-key="pk_test_cHJvdmVuLW1ha28tNTAuY2xlcmsuYWNjb3VudHMuZGV2JA"
src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js">
</script>

<style>
/* -----------------------------------------
   ROOT VARIABLES
------------------------------------------ */
:root {
    --aqua: #00eaff;
    --cobalt: #0066ff;
    --dark-panel: #000f09;
    --bg-main: #050235;
    --border-speed: 6s; /* slow loop as requested */
}

/* -----------------------------------------
   GLOBAL
------------------------------------------ */
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: var(--bg-main);
    color: white;
    overflow-x: hidden;
}

/* -----------------------------------------
   PARALLAX BACKGROUND (same as index)
------------------------------------------ */
.parallax-bg {
    position: fixed;
    inset: 0;
    z-index: -10;
    background: radial-gradient(circle at 25% 10%, #06034a 0%, #040221 45%, #010010 100%);
    pointer-events: none;
    transition: transform 0.15s ease-out;
}

/* -----------------------------------------
   FLOATING PARTICLES (same as index)
------------------------------------------ */
.particle {
    position: fixed;
    width: 6px;
    height: 6px;
    background: var(--aqua);
    border-radius: 50%;
    opacity: 0.4;
    filter: blur(3px);
    animation: floatParticle 14s infinite linear;
    z-index: -5;
}

@keyframes floatParticle {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-80px) scale(1.4); }
    100% { transform: translateY(0) scale(1); }
}

/* -----------------------------------------
   ORBIT ANIMATION BEHIND HEADER
------------------------------------------ */
.orbit-container {
    position: absolute;
    left: 50%;
    top: 52%;
    transform: translate(-50%, -50%);
    width: 420px;
    height: 420px;
    pointer-events: none;
    z-index: -1;
    opacity: 0.25;
}

.orbit {
    position: absolute;
    inset: 0;
    border: 2px dashed rgba(255,255,255,0.28);
    border-radius: 50%;
    animation: orbitSpin 18s linear infinite;
}

@keyframes orbitSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* -----------------------------------------
   NAVBAR (same as index)
------------------------------------------ */
.nav {
    max-width: 1120px;
    margin: 1.4rem auto;
    padding: 1rem 1.6rem;
    background: rgba(0, 25, 50, 0.35);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    backdrop-filter: blur(18px);
}

.brand {
    font-size: 1.7rem;
    font-weight: 900;
    background: linear-gradient(90deg, var(--aqua), #4da8ff);
    -webkit-background-clip: text;
    color: transparent;
}

.nav-right a {
    text-decoration: none;
    color: #c7d8ff;
    font-weight: 500;
    margin-right: 1.4rem;
}

.signin-btn {
    padding: 0.55rem 1.2rem;
    background: linear-gradient(135deg, #003a80, #0056c9);
    border: none;
    border-radius: 0.8rem;
    color: white;
    font-weight: 600;
    cursor: pointer;
}

/* -----------------------------------------
   GLASS PANEL FOR TOOL
------------------------------------------ */
.glass-panel {
    max-width: 1120px;
    margin: 3rem auto;
    padding: 2rem;
    background: var(--dark-panel);
    border-radius: 1.4rem;

    /* dotted marching-ants slow animation */
    border: 2px dotted white;
    animation: march var(--border-speed) linear infinite;

    /* animation trick */
    background-clip: padding-box;
}

@keyframes march {
    to { border-color: transparent; }
}

/* -----------------------------------------
   HEADLINE
------------------------------------------ */
.tool-hero {
    text-align: center;
    margin-top: 4rem;
    margin-bottom: 2rem;
    position: relative;
}

.tool-hero h1 {
    font-size: clamp(2.2rem, 5vw, 3.6rem);
    font-weight: 800;
    line-height: 1.15;
}

.tool-hero p {
    margin-top: 0.5rem;
    font-size: 1.1rem;
    color: #b9c7e0;
    font-family: 'Caveat', cursive;
    font-size: 1.6rem;
}

/* -----------------------------------------
   TOOL GRID
------------------------------------------ */
.tool-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
}

@media(max-width: 900px) {
    .tool-grid {
        grid-template-columns: 1fr;
    }
}

/* -----------------------------------------
   INPUT / OUTPUT BOXES
------------------------------------------ */
.textbox {
    width: 100%;
    min-height: 180px;
    background: #000f09;
    border: 1px solid white; /* static white border */
    border-radius: 0.8rem;
    padding: 1rem;
    resize: vertical;
    color: white;
    font-size: 0.95rem;
    outline: none;
}

.textbox:focus {
    border-color: var(--aqua);
}

/* -----------------------------------------
   PRESET BUTTONS
------------------------------------------ */
.preset-btn {
    width: 100%;
    padding: 0.7rem 1rem;
    border-radius: 999px;
    border: 1px solid white;
    background: #000f09;
    color: white;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.6rem;
}

.preset-btn.selected {
    background: linear-gradient(135deg, var(--aqua), var(--cobalt));
    border: none;
}

.preset-pro-pill {
    font-size: 0.75rem;
    padding: 0.1rem 0.5rem;
    border-radius: 999px;
    background: #fffbeb;
    color: #f59e0b;
    border: 1px solid #facc15;
}

/* -----------------------------------------
   MAIN HUMANIZE BUTTON
------------------------------------------ */
#humanizeBtn {
    width: 100%;
    margin-top: 1rem;
    padding: 1rem;
    background: linear-gradient(135deg, var(--aqua), var(--cobalt));
    color: white;
    border: none;
    border-radius: 1rem;
    cursor: pointer;
    font-weight: 700;
    font-size: 1.1rem;
}
</style>
</head>

<body>

<!-- PARALLAX BACKGROUND -->
<div class="parallax-bg"></div>

<!-- FLOATING PARTICLES -->
<script>
for (let i = 0; i < 14; i++) {
    const p = document.createElement("div");
    p.classList.add("particle");
    p.style.left = Math.random()*100 + "vw";
    p.style.top = Math.random()*100 + "vh";
    p.style.animationDelay = Math.random()*8 + "s";
    document.body.appendChild(p);
}
</script>

<!-- NAVBAR -->
<header class="nav">
    <div class="brand">Clarytiq</div>

    <div class="nav-right">
        <a href="/pricing.html">Pricing</a>
        <a href="/legal.html">Legal</a>
        <a href="/support.html">Support</a>
        <button class="signin-btn" id="openSignIn">Sign In</button>
    </div>
</header>

<!-- SIGN-IN OVERLAY (CUSTOM POPUP) -->
<div id="sign-in" style="
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(12px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    transition: opacity .35s ease;
">
    <div id="clerk-sign-in" style="width:400px; max-width:90%;"></div>
</div>

<!-- HERO SECTION OF THE TOOL -->
<section class="tool-hero">
    <div class="orbit-container">
        <div class="orbit"></div>
    </div>

    <h1>Turn raw text into clarity ‚Äî instantly.</h1>
    <p>Your understanding engine, built for speed and precision.</p>
</section>

<!-- MAIN GLASS PANEL FOR TOOL -->
<div class="glass-panel">

    <div class="tool-grid">
        <!-- LEFT PANEL START -->
        <section>
            <h3 style="color:white; font-size:1rem; margin-bottom:0.4rem;">Your Text</h3>

            <textarea id="inputText" class="textbox" placeholder="Paste AI-generated or class notes here‚Ä¶" maxlength="2000"></textarea>

            <div style="display:flex; justify-content:space-between; margin-top:0.3rem; font-size:0.85rem;">
                <div id="inputError" style="color:#ff6b6b;"></div>
                <div id="charCounter" style="color:#cbd5e1;">0 / 2000</div>
            </div>

            <div style="margin-top:1rem;">
                <h4 style="margin-bottom:0.4rem; color:#b9c7e0;">Choose mode</h4>

                <button class="preset-btn selected" data-preset="simple">
                    <span>Simple Humanizer (Free)</span>
                </button>

                <button class="preset-btn" data-preset="simple_words">
                    <span>Easy Words (Free)</span>
                </button>

                <button class="preset-btn" data-preset="exam">
                    <span>Exam Ready</span>
                    <span class="preset-pro-pill">PRO</span>
                </button>

                <button class="preset-btn" data-preset="genz">
                    <span>Gen-Z Mode</span>
                    <span class="preset-pro-pill">PRO</span>
                </button>

                <button class="preset-btn" data-preset="cause_effect">
                    <span>Cause ‚Üí Effect</span>
                    <span class="preset-pro-pill">PRO</span>
                </button>
            </div>

            <div id="presetPreview" style="
                margin-top:0.8rem;
                padding:0.7rem;
                background:#000f09;
                border:1px solid white;
                border-radius:0.8rem;
                display:none;
                font-size:0.9rem;
                color:#d0e0ff;
            "></div>

            <div id="humanizeCounterRow" style="margin-top:0.6rem; font-size:0.85rem; text-align:right;">
                <span id="humanizeCounter">(0 left today)</span>
            </div>

            <button id="humanizeBtn">‚ú® Humanize Notes</button>
        </section>
        <!-- LEFT PANEL END -->
        <!-- RIGHT PANEL START -->
        <section>
            <h3 style="color:white; font-size:1rem; margin-bottom:0.4rem;">Result</h3>

            <div id="outputBox" class="textbox" style="
                min-height: 180px;
                overflow-y: auto;
                white-space: pre-wrap;
            ">
                <div style="color:#7a8ca1;">Your humanized notes will appear here‚Ä¶</div>
            </div>

            <div id="outputError" style="color:#ff6b6b; margin-top:0.4rem; font-size:0.85rem;"></div>

            <div style="
                margin-top:1rem;
                display:flex;
                gap:0.6rem;
                justify-content:space-between;
                flex-wrap:wrap;
            ">
                <button id="copyBtn" class="preset-btn" style="flex:1; text-align:center;">üìã Copy</button>
                <button id="downloadBtn" class="preset-btn" style="flex:1; text-align:center;">‚¨áÔ∏è Download</button>
            </div>

            <div style="
                margin-top:0.9rem;
                font-size:0.85rem;
                color:#cfd9e6;
            ">
                Mode used:
                <span id="modeUsed" style="
                    padding:0.2rem 0.6rem;
                    border-radius:999px;
                    background:#00151f;
                    border:1px solid white;
                    font-weight:600;
                ">SIMPLE</span>
            </div>
        </section>
        <!-- RIGHT PANEL END -->
    </div> <!-- END GRID -->
</div> <!-- END GLASS PANEL -->

<!-- FOOTER -->
<footer style="
    text-align:center;
    color:#8ea1c7;
    font-size:0.9rem;
    margin:3rem 0 2rem 0;
">
    ¬© 2025 Clarytiq ‚Äî Powered by Vercel ‚Ä¢ Clerk
</footer>

<!-- PRO EXAMPLE MODAL -->
<div id="proExampleModal" style="
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.65);
    backdrop-filter: blur(8px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 99999;
">
    <div class="pro-modal" style="
        background: #000f09;
        padding: 1.6rem;
        border-radius: 1rem;
        border: 2px dotted white;
        animation: march var(--border-speed) linear infinite;
        max-width: 480px;
        width: 90%;
        color:white;
    ">
        <h2 style="margin-bottom:0.4rem;">PRO Rewrite Example üîí</h2>
        <p style="font-size:0.9rem; color:#d0e0ff;">
            Here‚Äôs how PRO transforms your text:
        </p>

        <div id="exampleInput" style="
            margin-top:1rem;
            padding:1rem;
            background:#000;
            border:1px solid white;
            border-radius:0.8rem;
            white-space:pre-wrap;
        "></div>

        <div id="exampleOutput" style="
            margin-top:1rem;
            padding:1rem;
            background:#000f13;
            border:1px solid white;
            border-radius:0.8rem;
            white-space:pre-wrap;
        "></div>

        <button id="buyProBtn" style="
            margin-top:1.3rem;
            width:100%;
            padding:0.8rem;
            background:linear-gradient(135deg, var(--aqua), var(--cobalt));
            color:white;
            border:none;
            border-radius:1rem;
            cursor:pointer;
            font-weight:700;
        ">
            Buy PRO Now ‚Üí
        </button>

        <button id="proExampleCloseBtn" style="
            margin-top:0.6rem;
            width:100%;
            padding:0.7rem;
            border-radius:1rem;
            border:1px solid white;
            background:#000f09;
            color:white;
            cursor:pointer;
        ">
            Close
        </button>
    </div>
</div>

<!-- TOAST -->
<div id="toast" style="
    position: fixed;
    right: 1.5rem;
    bottom: 1.5rem;
    padding: 0.6rem 1rem;
    background: #22c55e;
    color: white;
    border-radius: 999px;
    opacity: 0;
    pointer-events: none;
    transition: opacity .25s ease;
    font-size: 0.85rem;
    z-index:9999;
">
    <span id="toastMessage">Copied!</span>
</div>
<!-- MAIN APP LOGIC -->
<script>
/* =======================================================
   PARALLAX BACKGROUND
======================================================= */
const parallax = document.querySelector(".parallax-bg");
document.addEventListener("mousemove", (e) => {
    const x = (e.clientX / window.innerWidth - 0.5) * 16;
    const y = (e.clientY / window.innerHeight - 0.5) * 16;
    parallax.style.transform = `translate(${x}px, ${y}px)`;
});

/* =======================================================
   PRESET LOGIC
======================================================= */
const presetButtons = [...document.querySelectorAll(".preset-btn")];
const presetPreview = document.getElementById("presetPreview");
const modeUsedEl = document.getElementById("modeUsed");

let selectedPreset = "simple";

const PRESET_DESC = {
    simple: "Makes your text clean, natural and readable.",
    simple_words: "Uses simpler language for easier understanding.",
    exam: "PRO: Exam-style formal structured answers.",
    genz: "PRO: Gen-Z tone, dark humour, emojis.",
    cause_effect: "PRO: Cause ‚Üí Effect structured logical reasoning."
};

presetButtons.forEach(btn => {
    btn.addEventListener("click", () => {
        presetButtons.forEach(b => b.classList.remove("selected"));
        btn.classList.add("selected");

        selectedPreset = btn.dataset.preset;
        modeUsedEl.textContent = selectedPreset.toUpperCase();

        if (PRESET_DESC[selectedPreset]) {
            presetPreview.style.display = "block";
            presetPreview.textContent = PRESET_DESC[selectedPreset];
        }

        updateCreditCounter();
    });
});

/* =======================================================
   CREDIT SYSTEM
======================================================= */
const LIMITS = {
    beforeLogin: { simple: 1, simple_words: 1 },
    afterLogin: { simple: 2, simple_words: 2, genz: 1, exam: 1, cause_effect: 1 }
};

const PRO_MODES = ["genz", "exam", "cause_effect"];

function loadCredits() {
    const today = new Date().toDateString();
    const saved = JSON.parse(localStorage.getItem("nh_credits"));

    if (!saved || saved.date !== today) {
        const fresh = {
            date: today,
            beforeLogin: { ...LIMITS.beforeLogin },
            afterLogin: { ...LIMITS.afterLogin }
        };
        localStorage.setItem("nh_credits", JSON.stringify(fresh));
        return fresh;
    }
    return saved;
}

function saveCredits(d) {
    localStorage.setItem("nh_credits", JSON.stringify(d));
}

let credits = loadCredits();

function getCreditsLeft(preset) {
    const pool = window.isUserLoggedIn ? credits.afterLogin : credits.beforeLogin;
    return pool[preset] ?? 0;
}

function hasCredit(preset) {
    return getCreditsLeft(preset) > 0;
}

function useCredit(preset) {
    if (window.isUserLoggedIn) {
        credits.afterLogin[preset]--;
    } else {
        credits.beforeLogin[preset]--;
    }
    saveCredits(credits);
}

const humanizeCounter = document.getElementById("humanizeCounter");
function updateCreditCounter() {
    const left = getCreditsLeft(selectedPreset);
    if (PRO_MODES.includes(selectedPreset)) {
        humanizeCounter.textContent = window.isUserLoggedIn
            ? `(${left} PRO tries left today)`
            : `(Login required for PRO)`;
    } else {
        humanizeCounter.textContent = `(${left} left today)`;
    }
}
updateCreditCounter();

/* =======================================================
   API CALL WRAPPER
======================================================= */
async function callAI(preset, text) {
    try {
        const res = await fetch("/api/humanize", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ preset, userText: text })
        });
        const data = await res.json();
        return data.output;
    } catch (err) {
        console.error("API error:", err);
        return null;
    }
}

/* =======================================================
   PRO EXAMPLE POPUP DATA
======================================================= */
const PRO_EXAMPLES = {
    genz: {
        input: "The French Revolution changed France.",
        output: "Bruhh France woke up and chose ‚ú®chaos‚ú® üíÄüî•. People said 'we ball' and removed the king."
    },
    exam: {
        input: "The French Revolution changed France.",
        output: "The French Revolution led to major political, economic, and social reforms in France."
    },
    cause_effect: {
        input: "Taxes increased in France.",
        output:
`Cause ‚Üí Effect:
‚Ä¢ High taxes ‚Üí Public anger ‚Üí Protests
‚Ä¢ Food prices rose ‚Üí Riots
‚Ä¢ National debt increased ‚Üí Collapse of monarchy`
    }
};

/* =======================================================
   HUMANIZE BUTTON
======================================================= */
const input = document.getElementById("inputText");
const outputBox = document.getElementById("outputBox");
const inputErr = document.getElementById("inputError");
const outputErr = document.getElementById("outputError");
const humanizeBtn = document.getElementById("humanizeBtn");

const exampleModal = document.getElementById("proExampleModal");
const exampleInput = document.getElementById("exampleInput");
const exampleOutput = document.getElementById("exampleOutput");

const signInOverlay = document.getElementById("sign-in");
const signInBox = document.getElementById("clerk-sign-in");

let outputText = "";

humanizeBtn.addEventListener("click", async (e) => {
    e.stopPropagation();

    inputErr.textContent = "";
    outputErr.textContent = "";

    const text = input.value.trim();
    if (!text) {
        inputErr.textContent = "Paste some text first.";
        return;
    }

    // NO CREDIT CASE
    if (!hasCredit(selectedPreset)) {

        // NOT LOGGED IN ‚Üí SHOW CLERK POPUP
        if (!window.isUserLoggedIn) {
            if (window.showSignInOverlay) {
                window.showSignInOverlay();
            } else {
                signInOverlay.style.display = "flex";
                setTimeout(() => signInOverlay.style.opacity = 1, 20);
            }
            return;
        }

        // LOGGED IN ‚Üí SHOW PRO DEMO
        const ex = PRO_EXAMPLES[selectedPreset] || {
            input: "No credits left.",
            output: "Buy PRO to continue."
        };

        exampleInput.textContent = ex.input;
        exampleOutput.textContent = ex.output;
        exampleModal.style.display = "flex";
        return;
    }

    // USE CREDIT
    useCredit(selectedPreset);
    updateCreditCounter();

    // Fake loading skeleton
    outputBox.innerHTML = `
        <div style="display:flex; flex-direction:column; gap:0.4rem;">
            <div style="height:0.8rem; background:#222; border-radius:1rem;"></div>
            <div style="height:0.8rem; width:90%; background:#222; border-radius:1rem;"></div>
            <div style="height:0.8rem; width:80%; background:#222; border-radius:1rem;"></div>
        </div>
    `;

    const result = await callAI(selectedPreset, text);

    if (!result) {
        outputErr.textContent = "Something went wrong. Try again.";
        return;
    }

    outputText = result;
    outputBox.innerHTML = result.replace(/\n/g, "<br>");
});

/* =======================================================
   COPY & DOWNLOAD
======================================================= */
const toast = document.getElementById("toast");
const toastMsg = document.getElementById("toastMessage");

function showToast(msg) {
    toastMsg.textContent = msg;
    toast.style.opacity = 1;
    setTimeout(() => toast.style.opacity = 0, 1500);
}

document.getElementById("copyBtn").addEventListener("click", () => {
    navigator.clipboard.writeText(outputText || "");
    showToast("Copied!");
});

document.getElementById("downloadBtn").addEventListener("click", () => {
    const blob = new Blob([outputText || ""], { type: "text/plain" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "humanized.txt";
    link.click();
});

/* =======================================================
   PRO MODAL CLOSE
======================================================= */
document.getElementById("proExampleCloseBtn").addEventListener("click", () => {
    exampleModal.style.display = "none";
});

exampleModal.addEventListener("click", (e) => {
    const box = document.querySelector(".pro-modal");
    if (!box.contains(e.target)) exampleModal.style.display = "none";
});

/* =======================================================
   CHARACTER COUNTER
======================================================= */
const charCounter = document.getElementById("charCounter");
input.addEventListener("input", () => {
    charCounter.textContent = `${input.value.length} / 2000`;
});

/* =======================================================
   ESC KEY HANDLING
======================================================= */
document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
        if (exampleModal.style.display === "flex") exampleModal.style.display = "none";
        if (signInOverlay.style.display === "flex") {
            signInOverlay.style.opacity = 0;
            setTimeout(() => signInOverlay.style.display = "none", 300);
        }
    }
});
</script>
<!-- CLERK AUTH + UI WIRING -->
<script>
window.isUserLoggedIn = false;

window.updateAuthUI = function () {
    const signInBtn = document.getElementById("openSignIn");
    const userBtnContainer = document.getElementById("clerk-user-button");

    if (!signInBtn || !userBtnContainer) return;

    if (window.isUserLoggedIn) {
        signInBtn.style.display = "none";
        userBtnContainer.style.display = "block";
    } else {
        signInBtn.style.display = "inline-flex";
        userBtnContainer.style.display = "none";
    }
};

/* SIGN-IN POPUP OPEN FUNCTION */
window.showSignInOverlay = function () {
    const overlay = document.getElementById("sign-in");
    const box = document.getElementById("clerk-sign-in");

    overlay.style.display = "flex";
    setTimeout(() => (overlay.style.opacity = "1"), 20);

    if (window.Clerk && box && !box.hasChildNodes()) {
        window.Clerk.mountSignIn(box, {
            appearance: { baseTheme: "light" }
        });
    }
};

document.getElementById("openSignIn").addEventListener("click", (e) => {
    e.stopPropagation();
    window.showSignInOverlay();
});

/* CLOSE SIGN-IN POPUP WHEN CLICKING OUTSIDE */
document.getElementById("sign-in").addEventListener("click", (e) => {
    const box = document.getElementById("clerk-sign-in");
    if (!box.contains(e.target)) {
        const overlay = document.getElementById("sign-in");
        overlay.style.opacity = "0";
        setTimeout(() => (overlay.style.display = "none"), 300);
    }
});

/* CLERK INITIALIZATION */
window.addEventListener("load", async () => {
    const userBtnContainer = document.getElementById("clerk-user-button");

    try {
        await window.Clerk.load();

        const emit = () => {
            const user = window.Clerk.user;
            window.isUserLoggedIn = !!(user && user.id);
            window.updateAuthUI();
        };

        emit();
        window.Clerk.addListener(emit);

        if (userBtnContainer) {
            window.Clerk.mountUserButton(userBtnContainer, {
                afterSignOutUrl: window.location.href,
                appearance: { baseTheme: "light" }
            });
        }
    } catch (err) {
        console.error("Clerk load error:", err);
    }
});
</script>

<!-- SECOND CLERK SCRIPT (kept by your request) -->
<script async crossorigin="anonymous"
data-clerk-publishable-key="pk_test_cHJvdmVuLW1ha28tNTAuY2xlcmsuYWNjb3VudHMuZGV2JA"
src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js">
</script>

</body>
</html>
